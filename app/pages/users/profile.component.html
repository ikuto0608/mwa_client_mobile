<StackLayout *ngIf="user" class="main-container" colSpan="3" row="1">
  <GridLayout columns="*,*,*" rows="auto,auto">
    <GridLayout col="0" colspan="3" row="0" columns="*" rows="auto,auto" class="header">
      <Label row="0" class="image"></Label>
      <Label row="1" [text]="user.name" class="name"></Label>
    </GridLayout>

    <GridLayout col="0" colspan="3" row="1" columns="*,*,*" rows="auto" class="content">
      <GridLayout col="0" row="0" columns="*" rows="*,*">
        <Label row="0" text="&#xe926;" class="icon"></Label>
        <Label row="1" [text]="examName" class="title" textWrap="true"></Label>
      </GridLayout>
      <GridLayout col="1" row="0" columns="*" rows="*,*">
        <Label row="0" text="&#xe99b;" class="icon"></Label>
        <Label row="1" [text]="averageScore" class="title" textWrap="true"></Label>
      </GridLayout>
      <GridLayout col="2" row="0" columns="*" rows="*,*">
        <Label row="0" text="&#xe950;" class="icon"></Label>
        <Label row="1" [text]="averageRecordTime | formatMMSSSS" class="title" textWrap="true"></Label>
      </GridLayout>
    </GridLayout>
  </GridLayout>

  <ScrollView *ngIf="!isDetailView && exams" orientation="vertical">
    <GridLayout columns="*,*,*,*,*" [rows]="getCols()" toggleNavButton class="exams">
      <Button *ngFor="let exam of exams; let indexOfTopic = index"
              (tap)="historyDetail(exam)"
              [col]="getCol(indexOfTopic)"
              [row]="getRow(indexOfTopic)"
              [text]="exam.name"
              [style]="getStyle(indexOfTopic)"
              class="exam"
              textWrap="true"></Button>
    </GridLayout>
  </ScrollView>

  <ListView *ngIf="isDetailView && latestRecords" [items]="latestRecords" class="list-group">
    <template let-record="item">
      <GridLayout (tap)="historyList()" columns="*,*,*" class="list-group-item">
        <Label col="0" [text]="record.score"></Label>
        <Label col="1" [text]="record.record_time"></Label>
        <Label col="2" [text]="record.created_at"></Label>
      </GridLayout>
    </template>
  </ListView>
  <Button *ngIf="isDetailView" (tap)="historyList()" text="Back" class="btn btn-primary"></Button>
</StackLayout>

<ActivityIndicator class="main-container" colSpan="3" row="1" [busy]="isLoading" [visibility]="isLoading ? 'visible' : 'collapse'" horizontalAlignment="center" verticalAlignment="center"></ActivityIndicator>
